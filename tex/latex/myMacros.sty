\ProvidesPackage{myMacros}
\author{Jialin Xin}

\RequirePackage{xparse}

\RequirePackage{amsmath,amsthm,amssymb,mathrsfs}
\RequirePackage{mathtools}
% \RequirePackage{etoolbox}

% symbols
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\HH}{\mathbb{H}}
\newcommand{\OO}{\mathbb{O}}
\newcommand{\const}{\mathrm{const.}}
% \newcommand{\vol}{\mathrm{vol}}
\DeclareMathOperator{\vol}{vol} % Riemannian volume form

% operators
\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}


% for function restriction, differentiation at a point, etc.
\newcommand{\at}[2]{%
  { \left.\kern-\nulldelimiterspace#1\right|_{#2} }
}

% differential symbols
\newcommand*{\Diff}[2]{\frac{d#1}{d#2}}
\newcommand*{\DiffAt}[3]{%
  \at{\Diff{#1}{#2}}{#3}%
}

% usage: \partialD{order}{function}{variable1,variable2,...}
\newcommand*{\partialD}[3]{%
  \frac{\partial^{#1}#2}{%
    \@for\item:=#3\do{\partial\item}%
  }%
}


% By default, the subscript will be too high if it is a capital letter,
% adding an empty superscript can solve this.
\newcommand{\@emptySup}{ \@ifnextchar^{}{^{}} }

% absolute value
\DeclarePairedDelimiter\abs\lvert\rvert

% norm
\DeclarePairedDelimiter\norm\lVert\rVert
% the following may be rewritten using xparse
% \DeclarePairedDelimiterXPP\norm[2]{}\lVert\rVert{
%   \ifblank{#2}{}{_#2} }{% #2=space
%   \ifblank{#1}{\:\cdot\:}{#1}% #1=vector
% }

% inner product
\newcommand{\inn}[2]{\left\langle #1,#2 \right\rangle}
% usage: \inn{x}{y}; \inn[\big]{x}{y}; \inn<space>{x}{y}; \inn[\big]<space>{x}{y}
%        \inn*{x}{y}; \inn*<space>{x}{y}
% \DeclarePairedDelimiterXPP\@inn[3]{}\langle\rangle{_{#3}}{#1,#2}
% \NewDocumentCommand \inn {s O{} D<>{} m m} {%
%   % #1: the star
%   % #2: size (ignored in the starred version)
%   % #3: the inner product space
%   % #4, #5: the vectors
%   \IfBooleanTF{#1}
%     { \@inn*{#4}{#5}{#3}\@emptySup }
%     { \@inn[#2]{#4}{#5}{#3}\@emptySup }
% }

% set definition (simple version)
% \newcommand{\Set}[2]{\left\{#1\,\middle|\,#2\right\}}

% set definition (taken from the mathtools doc)
% usage: \Set{elements}, or \Set{elements \given conditions}
\providecommand\given{} % the vertical bar in set definitions
\newcommand\SetSymbol[1]{%
  \mathchoice{\:}{\:}{\,}{\,}#1
  \allowbreak
  \mathchoice{\:}{\:}{\,}{\,}
  \mathopen{}
}
\DeclarePairedDelimiterX\Set[1]\{\}{%
  \renewcommand\given[1][\vert]{ \SetSymbol{\delimsize##1} }%
  #1%
}

\endinput
